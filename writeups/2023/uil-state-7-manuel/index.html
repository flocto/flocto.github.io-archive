<!doctype html><html lang=en-us><head><title>UIL State CS Packet #7: Manuel | flocto</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.115.0"><link rel=canonical href=/writeups/2023/uil-state-7-manuel/><link href=/sass/main.min.39ece682d01021effadbf2d7ce0f71f0aec2ff50bfab20c565a139b86b029979.css rel=stylesheet></head><body><div class=flexWrapper><header class=headerWrapper><div class=header><div><a href=/><span class=terminal>fl@cto ~ $</span></a></div><nav class=headerLinks><ul><li><a href=/about title>~/about</a></li><li><a href=/projects title>~/projects</a></li><li><a href=/writeups title>~/writeups</a></li><li><a href=/blog title>~/blog</a></li><li><a href=/ style=align-items:center;justify-content:center><img style=width:30px;height:30px;border-radius:15px;vertical-align:text-bottom src=/profile.png alt=Home></a></li></ul></nav></div></header><div class=content><main class=main><div class=postWrapper><h1>UIL State CS Packet #7: Manuel</h1><ul class=tagList><li class=tagItem><a class=tagLink href=/tags/uil/>uil</a></li><li class=tagItem><a class=tagLink href=/tags/java/>java</a></li></ul><div><p>I&rsquo;ve been doing UIL practice to grind <del>definitely not because I was forced to</del> for state/regional.
Recently I came across last year&rsquo;s (2022) state packet, and I wanted to share my solutions to one of the problems.</p><p>Anyway&rsquo;s let&rsquo;s just get into it.</p><h2 id=problem-statement>Problem statement</h2><p>The problem statement is as follows:</p><ul><li>Input consists of a single integer T, followed by T test cases.</li><li>For each test case, there will be an integer N, followed by N lines of input.</li><li>The N following lines define a system of linear equations in N variables.</li><li>All coefficients and the final constant are integers.</li><li>We need to solve the system of linear equations, and output the solution.</li></ul><p>While the problem seems pretty straightforward, there&rsquo;s a few caveats:</p><p>First of all, take a look at this example input:</p><pre tabindex=0><code>3
1x+1y+1z=6
0x+2y+5z=-4
2x+5y-1z=27
</code></pre><p>We&rsquo;re given the system of linear equations as pure strings, and it&rsquo;s our job to parse every coefficient, variable name, and constant.</p><p>Thankfully, the input also tells us:</p><ul><li>Variables are guarenteed to be a single lowercase letter from <code>a</code> - <code>z</code>.</li><li>Variables stay in the same order for all equations per test case.</li><li>Variables are not allowed to be the same and are not allowed to be duplicated within the same test case.`</li></ul><p>Another caveat is the output. We have to output in the format <code>var1=NUM1,var2=NUM2...</code>, where <code>NUMi</code> is the solution for the variable <code>vari</code> rounded to 3 decimal places.</p><p>But first let&rsquo;s worry about parsing the actual equations</p><h3 id=parsing-input>Parsing input</h3><p>A neat trick we can do is to use regex to parse the input. As we know the variables are lowercase letters, we can single them out like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// ignore the Object[] return for now
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> Object<span style=color:#f92672>[]</span> <span style=color:#a6e22e>parseInputs</span><span style=color:#f92672>(</span>String line<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> n<span style=color:#f92672>){</span> <span style=color:#75715e>// line is equation as string, n is number of variables
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    String<span style=color:#f92672>[]</span> vars <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> String<span style=color:#f92672>[</span>n<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ArrayList<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> temp <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>line<span style=color:#f92672>.</span><span style=color:#a6e22e>split</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;[^a-z]&#34;</span><span style=color:#f92672>)));</span>
</span></span><span style=display:flex><span>    temp<span style=color:#f92672>.</span><span style=color:#a6e22e>removeIf</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>));</span> 
</span></span><span style=display:flex><span>    vars <span style=color:#f92672>=</span> temp<span style=color:#f92672>.</span><span style=color:#a6e22e>toArray</span><span style=color:#f92672>(</span>vars<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>First, we split on every character that isn&rsquo;t a lowercase letter. This gives us an array of strings, where each string is either a variable or an empty string.
We can then filter out the empty strings with the cool <code>removeIf</code> method, and we&rsquo;re left with just the variables.</p><p>For example:</p><pre tabindex=0><code>&#34;0x+2y+5z=-4&#34; -&gt; [&#34;&#34;, &#34;x&#34;, &#34;&#34;, &#34;y&#34;, &#34;&#34;, &#34;z&#34;, &#34;&#34;]

Filtering out s -&gt; s.equals(&#34;&#34;) gives
[&#34;x&#34;, &#34;y&#34;, &#34;z&#34;]
</code></pre><p>Now that we have the variables, let&rsquo;s split on every character that IS a lowercase letter, as well as <code>=</code> to seperate the coefficients and constant.</p><p>We&rsquo;ll store them in <code>double[]</code> for now because we know our final answer eventually becomes a float anyway, but we can use <code>Integer.parseInt</code> because we know
every coefficient and constant is an integer.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> Object<span style=color:#f92672>[]</span> <span style=color:#a6e22e>parseInputs</span><span style=color:#f92672>(</span>String line<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> n<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span> left <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[</span>n<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span> ret <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    String<span style=color:#f92672>[]</span> vars <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> String<span style=color:#f92672>[</span>n<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ArrayList<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> temp <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>line<span style=color:#f92672>.</span><span style=color:#a6e22e>split</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;[^a-z]&#34;</span><span style=color:#f92672>)));</span>
</span></span><span style=display:flex><span>    temp<span style=color:#f92672>.</span><span style=color:#a6e22e>removeIf</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>));</span> 
</span></span><span style=display:flex><span>    vars <span style=color:#f92672>=</span> temp<span style=color:#f92672>.</span><span style=color:#a6e22e>toArray</span><span style=color:#f92672>(</span>vars<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    temp <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>line<span style=color:#f92672>.</span><span style=color:#a6e22e>split</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;[a-z=]&#34;</span><span style=color:#f92672>)));</span>
</span></span><span style=display:flex><span>    temp<span style=color:#f92672>.</span><span style=color:#a6e22e>removeIf</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    String<span style=color:#f92672>[]</span> eq <span style=color:#f92672>=</span> temp<span style=color:#f92672>.</span><span style=color:#a6e22e>toArray</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> String<span style=color:#f92672>[</span><span style=color:#ae81ff>0</span><span style=color:#f92672>]);</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>i<span style=color:#f92672>&lt;</span>n<span style=color:#f92672>;</span>i<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>        left<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>parseInt</span><span style=color:#f92672>(</span>eq<span style=color:#f92672>[</span>i<span style=color:#f92672>]);</span> 
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    ret <span style=color:#f92672>=</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>parseInt</span><span style=color:#f92672>(</span>eq<span style=color:#f92672>[</span>n<span style=color:#f92672>]);</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>[]{</span>left<span style=color:#f92672>,</span> ret<span style=color:#f92672>,</span> vars<span style=color:#f92672>};</span> <span style=color:#75715e>// unpack later
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Here&rsquo;s an example of what this does:</p><pre tabindex=0><code>&#34;0x+2y+5z=-4&#34; -&gt; [&#34;0&#34;, &#34;+2&#34;, &#34;+5&#34;, &#34;&#34;, &#34;-4&#34;]

Filtering out s -&gt; s.equals(&#34;&#34;) gives
[&#34;0&#34;, &#34;+2&#34;, &#34;+5&#34;, &#34;-4&#34;]

Finally casting to int gives
left = [0, 2, 5]
ret = -4
</code></pre><p>Now that we have every piece of data extracted, let&rsquo;s see how we can actually solve the system of linear equations.</p><h3 id=linear-equations-and-linear-algebra>Linear equations and linear algebra</h3><p>Let&rsquo;s first take a step back and consider the set of linear equations purely mathematically.
$$
\begin{align*} x + y + z &= 6 \newline 2y + 5z &= -4 \newline 2x + 5y - z &= 27 \end{align*}
$$</p><p>We can represent this system of linear equations as a product of a matrix and a vector:
$$
\begin{bmatrix} 1 & 1 & 1 \newline 0 & 2 & 5 \newline 2 & 5 & -1 \end{bmatrix}
\begin{bmatrix} x \newline y \newline z \end{bmatrix}=
\begin{bmatrix} 6 \newline -4 \newline 27 \end{bmatrix}
$$</p><p>This is because if we expand out the matrix multiplication, we get our original system of linear equations.
$$
\begin{bmatrix}
1 & 1 & 1 \newline
0 & 2 & 5 \newline
2 & 5 & -1
\end{bmatrix}
\begin{bmatrix}
x \newline
y \newline
z
\end{bmatrix}=
\begin{bmatrix}
1x + 1y + 1z \newline
0x + 2y + 5z \newline
2x + 5y - z
\end{bmatrix}=
\begin{bmatrix}
x + y + z \newline
2y + 5z \newline
2x + 5y - z
\end{bmatrix}=
\begin{bmatrix}
6 \newline
-4 \newline
27
\end{bmatrix}
$$</p><p>However, we can also reverse this multiplication to solve for the vector of variables.
$$
\begin{bmatrix}
1 & 1 & 1 \newline
0 & 2 & 5 \newline
2 & 5 & -1
\end{bmatrix}
^{-1}
\begin{bmatrix}
6 \newline
-4 \newline
27
\end{bmatrix}=
\begin{bmatrix}
x \newline
y \newline
z
\end{bmatrix}
$$</p><p>But how do we go about implementing this in Java?</p><h3 id=implementation-java-boilerplate-ahead->Implementation (Java boilerplate ahead ⚠️)</h3><p>Since we know the size of the matrix is either 2x2 or 3x3, we can just hardcode the matrix inverse for each case.</p><p>I followed the algorithms shown <a href=https://en.wikipedia.org/wiki/Invertible_matrix#Analytic_solution>here</a>, and implemented them in Java.</p><p>First let&rsquo;s start with the base boilerplate code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Matrix</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> size<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span><span style=color:#f92672>[][]</span> mat<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Matrix</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> size<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>size</span> <span style=color:#f92672>=</span> size<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        mat <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[</span>size<span style=color:#f92672>][</span>size<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Matrix</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span><span style=color:#f92672>[][]</span> mat<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>mat</span> <span style=color:#f92672>=</span> mat<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>size</span> <span style=color:#f92672>=</span> mat<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        String ret <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>i<span style=color:#f92672>&lt;</span>size<span style=color:#f92672>;</span>i<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>j<span style=color:#f92672>&lt;</span>size<span style=color:#f92672>;</span>j<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>                ret <span style=color:#f92672>+=</span> mat<span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            ret <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;\n&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ret<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Let&rsquo;s also define a method for transposing a matrix (i.e. swapping rows and columns). It&rsquo;s used for inverting a 3x3 matrix.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Matrix <span style=color:#a6e22e>transpose</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        Matrix ret <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Matrix<span style=color:#f92672>(</span>size<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>i<span style=color:#f92672>&lt;</span>size<span style=color:#f92672>;</span>i<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>j<span style=color:#f92672>&lt;</span>size<span style=color:#f92672>;</span>j<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>                ret<span style=color:#f92672>.</span><span style=color:#a6e22e>mat</span><span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> mat<span style=color:#f92672>[</span>j<span style=color:#f92672>][</span>i<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ret<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Now let&rsquo;s define a method for calculating the determinant. Again, we hardcode both sizes seperately, and also introduce a helper function for 3x3 matrices.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>_subdet</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> j<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// only for 3x3
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// find determinant of overall matrix without row i and column j
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>double</span><span style=color:#f92672>[][]</span> submat <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[</span><span style=color:#ae81ff>2</span><span style=color:#f92672>][</span><span style=color:#ae81ff>2</span><span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> k <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> a<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>a<span style=color:#f92672>&lt;</span><span style=color:#ae81ff>3</span><span style=color:#f92672>;</span>a<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>a <span style=color:#f92672>==</span> i<span style=color:#f92672>)</span> <span style=color:#66d9ef>continue</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> l <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> b<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>b<span style=color:#f92672>&lt;</span><span style=color:#ae81ff>3</span><span style=color:#f92672>;</span>b<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>b <span style=color:#f92672>==</span> j<span style=color:#f92672>)</span> <span style=color:#66d9ef>continue</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                submat<span style=color:#f92672>[</span>k<span style=color:#f92672>][</span>l<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> mat<span style=color:#f92672>[</span>a<span style=color:#f92672>][</span>b<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>                l<span style=color:#f92672>++;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            k<span style=color:#f92672>++;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> Matrix<span style=color:#f92672>(</span>submat<span style=color:#f92672>).</span><span style=color:#a6e22e>det</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>det</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>size <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> mat<span style=color:#f92672>[</span><span style=color:#ae81ff>0</span><span style=color:#f92672>][</span><span style=color:#ae81ff>0</span><span style=color:#f92672>]*</span>mat<span style=color:#f92672>[</span><span style=color:#ae81ff>1</span><span style=color:#f92672>][</span><span style=color:#ae81ff>1</span><span style=color:#f92672>]</span> <span style=color:#f92672>-</span> mat<span style=color:#f92672>[</span><span style=color:#ae81ff>0</span><span style=color:#f92672>][</span><span style=color:#ae81ff>1</span><span style=color:#f92672>]*</span>mat<span style=color:#f92672>[</span><span style=color:#ae81ff>1</span><span style=color:#f92672>][</span><span style=color:#ae81ff>0</span><span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>size <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span> ret <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>i<span style=color:#f92672>&lt;</span><span style=color:#ae81ff>3</span><span style=color:#f92672>;</span>i<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>                ret <span style=color:#f92672>+=</span> mat<span style=color:#f92672>[</span><span style=color:#ae81ff>0</span><span style=color:#f92672>][</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>*</span> _subdet<span style=color:#f92672>(</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> i<span style=color:#f92672>)</span> <span style=color:#f92672>*</span> <span style=color:#f92672>(</span>i<span style=color:#f92672>%</span><span style=color:#ae81ff>2</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span> <span style=color:#f92672>?</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>:-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>);</span> <span style=color:#75715e>// aA - bB + cC
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> ret<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></div><p>A 2x2 inverse is easy to calculate:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>size <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span> det <span style=color:#f92672>=</span> det<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span><span style=color:#f92672>[][]</span> inv <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[][]</span> <span style=color:#f92672>{{</span>mat<span style=color:#f92672>[</span><span style=color:#ae81ff>1</span><span style=color:#f92672>][</span><span style=color:#ae81ff>1</span><span style=color:#f92672>],</span> <span style=color:#f92672>-</span>mat<span style=color:#f92672>[</span><span style=color:#ae81ff>0</span><span style=color:#f92672>][</span><span style=color:#ae81ff>1</span><span style=color:#f92672>]},</span> <span style=color:#f92672>{-</span>mat<span style=color:#f92672>[</span><span style=color:#ae81ff>1</span><span style=color:#f92672>][</span><span style=color:#ae81ff>0</span><span style=color:#f92672>],</span> mat<span style=color:#f92672>[</span><span style=color:#ae81ff>0</span><span style=color:#f92672>][</span><span style=color:#ae81ff>0</span><span style=color:#f92672>]}};</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>i<span style=color:#f92672>&lt;</span><span style=color:#ae81ff>2</span><span style=color:#f92672>;</span>i<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>j<span style=color:#f92672>&lt;</span><span style=color:#ae81ff>2</span><span style=color:#f92672>;</span>j<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>                    inv<span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>/=</span> det<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> Matrix<span style=color:#f92672>(</span>inv<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span></code></pre></div><p>which is the implemation of this formula:
$$
\textbf{A}^{-1} = \begin{bmatrix} a & b \newline c & d \end{bmatrix}^{-1} =
\frac{1}{\text{det}(\textbf{A})} \begin{bmatrix} d & -b \newline -c & a \end{bmatrix} =
\frac{1}{ad-bc} \begin{bmatrix} d & -b \newline -c & a \end{bmatrix}
$$</p><p>But 3x3 requires a bit more work&mldr;</p><h4 id=3x3-matrix-inverse>3x3 matrix inverse</h4><p>Here&rsquo;s the formula for a 3x3 matrix inverse:
$$
\textbf{A}^{-1} = \begin{bmatrix} a & b & c \newline d & e & f \newline g & h & i \end{bmatrix}^{-1} =
\frac{1}{\text{det}(\textbf{A})} \begin{bmatrix} A & B & C \newline D & E & F \newline G & H & I \end{bmatrix} ^ T =
\frac{1}{\text{det}(\textbf{A})} \begin{bmatrix} A & D & G \newline B & E & H \newline C & F & I \end{bmatrix}
$$
where
$$
\begin{align*}
&amp;A =& \text{det} \begin{bmatrix} e & f \newline h & i \end{bmatrix}, \quad &amp;D =& -\text{det} \begin{bmatrix} b & c \newline h & i \end{bmatrix},\quad &amp;G =& \text{det} \begin{bmatrix} b & c \newline e & f \end{bmatrix} \newline
&amp;B =& -\text{det} \begin{bmatrix} d & f \newline g & i \end{bmatrix}, \quad &amp;E =& \text{det} \begin{bmatrix} a & c \newline g & i \end{bmatrix},\quad &amp;H =& -\text{det} \begin{bmatrix} a & c \newline d & f \end{bmatrix} \newline
&amp;C =& \text{det} \begin{bmatrix} d & e \newline g & h \end{bmatrix}, \quad &amp;F =& -\text{det} \begin{bmatrix} a & b \newline g & h \end{bmatrix},\quad &amp;I =& \text{det} \begin{bmatrix} a & b \newline d & e \end{bmatrix}
\end{align*}
$$
Thankfully, the <code>_subdet</code> function from earlier can also help us calculate each of these smaller determinants.
This gives us final code which looks like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>        <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>size <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span> det <span style=color:#f92672>=</span> det<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span><span style=color:#f92672>[][]</span> inv <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[</span><span style=color:#ae81ff>3</span><span style=color:#f92672>][</span><span style=color:#ae81ff>3</span><span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>i<span style=color:#f92672>&lt;</span><span style=color:#ae81ff>3</span><span style=color:#f92672>;</span>i<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>j<span style=color:#f92672>&lt;</span><span style=color:#ae81ff>3</span><span style=color:#f92672>;</span>j<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>                    inv<span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> _subdet<span style=color:#f92672>(</span>i<span style=color:#f92672>,</span> j<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>i<span style=color:#f92672>+</span>j<span style=color:#f92672>)%</span><span style=color:#ae81ff>2</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>)</span> inv<span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>*=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            Matrix ret <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Matrix<span style=color:#f92672>(</span>inv<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            ret <span style=color:#f92672>=</span> ret<span style=color:#f92672>.</span><span style=color:#a6e22e>transpose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>i<span style=color:#f92672>&lt;</span><span style=color:#ae81ff>3</span><span style=color:#f92672>;</span>i<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>j<span style=color:#f92672>&lt;</span><span style=color:#ae81ff>3</span><span style=color:#f92672>;</span>j<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>                    ret<span style=color:#f92672>.</span><span style=color:#a6e22e>mat</span><span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>/=</span> det<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> ret<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Actually not too bad!</p><p>All together, we also need a final method to calculate the product of a matrix and a vector. This is so that we can multiply our inverted
matrix by the vector of constants to finally get the solution for each variable.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span> <span style=color:#a6e22e>multiply_vector</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span> vec<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>assert</span> vec<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span> <span style=color:#f92672>==</span> size<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span> ret <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[</span>size<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>i<span style=color:#f92672>&lt;</span>size<span style=color:#f92672>;</span>i<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>j<span style=color:#f92672>&lt;</span>size<span style=color:#f92672>;</span>j<span style=color:#f92672>++){</span>
</span></span><span style=display:flex><span>                ret<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>+=</span> mat<span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>*</span> vec<span style=color:#f92672>[</span>j<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ret<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=putting-it-all-together>Putting it all together</h3><p>So overall, our final process looks like this:</p><pre tabindex=0><code>for each test case:
    read in n
    coefs = double[n][n]
    constants = double[n]
    vars = string[n]

    for each equation:
        read in equation
        coef, cnst, vars = parseInputs(equation, n)
        coefs[i] = coef
        constants[i] = cnst
        vars = vars         # we override each time, but it doesn&#39;t matter because vars stay in same order and place each equation

    mat = Matrix(coefs)
    inv = mat.inverse()
    solution = inv.multiply_vector(constants)

    print out formatted solution
</code></pre><p>This should work regardless of 2 or 3 variables, because we have different code for each case.</p><p>My final code for this problem looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> java.util.*<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.*<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Manuel</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> Object<span style=color:#f92672>[]</span> <span style=color:#a6e22e>parseInputs</span><span style=color:#f92672>(</span>String line<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> n<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span> left <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[</span>n<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> ret <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String<span style=color:#f92672>[]</span> vars <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> String<span style=color:#f92672>[</span>n<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        ArrayList<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> temp <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>line<span style=color:#f92672>.</span><span style=color:#a6e22e>split</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;[^a-z]&#34;</span><span style=color:#f92672>)));</span>
</span></span><span style=display:flex><span>        temp<span style=color:#f92672>.</span><span style=color:#a6e22e>removeIf</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        vars <span style=color:#f92672>=</span> temp<span style=color:#f92672>.</span><span style=color:#a6e22e>toArray</span><span style=color:#f92672>(</span>vars<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        temp <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>line<span style=color:#f92672>.</span><span style=color:#a6e22e>split</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;[a-z=]&#34;</span><span style=color:#f92672>)));</span>
</span></span><span style=display:flex><span>        temp<span style=color:#f92672>.</span><span style=color:#a6e22e>removeIf</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        String<span style=color:#f92672>[]</span> eq <span style=color:#f92672>=</span> temp<span style=color:#f92672>.</span><span style=color:#a6e22e>toArray</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> String<span style=color:#f92672>[</span><span style=color:#ae81ff>0</span><span style=color:#f92672>]);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> n<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            left<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>parseInt</span><span style=color:#f92672>(</span>eq<span style=color:#f92672>[</span>i<span style=color:#f92672>]);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        ret <span style=color:#f92672>=</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>parseInt</span><span style=color:#f92672>(</span>eq<span style=color:#f92672>[</span>n<span style=color:#f92672>]);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>[]</span> <span style=color:#f92672>{</span> left<span style=color:#f92672>,</span> ret<span style=color:#f92672>,</span> vars <span style=color:#f92672>};</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        Scanner sc <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Scanner<span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>in</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> N <span style=color:#f92672>=</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>parseInt</span><span style=color:#f92672>(</span>sc<span style=color:#f92672>.</span><span style=color:#a6e22e>nextLine</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> I <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>;</span> I <span style=color:#f92672>&lt;=</span> N<span style=color:#f92672>;</span> I<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span> <span style=color:#75715e>// I for Testcase #
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>int</span> n <span style=color:#f92672>=</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>parseInt</span><span style=color:#f92672>(</span>sc<span style=color:#f92672>.</span><span style=color:#a6e22e>nextLine</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span><span style=color:#f92672>[][]</span> coef <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[</span>n<span style=color:#f92672>][</span>n<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span> res <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[</span>n<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            String<span style=color:#f92672>[]</span> vars <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> String<span style=color:#f92672>[</span>n<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> n<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                Object<span style=color:#f92672>[]</span> ret <span style=color:#f92672>=</span> parseInputs<span style=color:#f92672>(</span>sc<span style=color:#f92672>.</span><span style=color:#a6e22e>nextLine</span><span style=color:#f92672>(),</span> n<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                coef<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>double</span><span style=color:#f92672>[])</span> ret<span style=color:#f92672>[</span><span style=color:#ae81ff>0</span><span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>                res<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> ret<span style=color:#f92672>[</span><span style=color:#ae81ff>1</span><span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>                vars <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>String<span style=color:#f92672>[])</span> ret<span style=color:#f92672>[</span><span style=color:#ae81ff>2</span><span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// System.out.println(Arrays.deepToString(coef));
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#75715e>// System.out.println(Arrays.toString(res));
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#75715e>// System.out.println(Arrays.toString(vars));
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            Matrix mat <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Matrix<span style=color:#f92672>(</span>coef<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            mat <span style=color:#f92672>=</span> mat<span style=color:#f92672>.</span><span style=color:#a6e22e>inverse</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span> ans <span style=color:#f92672>=</span> mat<span style=color:#f92672>.</span><span style=color:#a6e22e>multiply_vector</span><span style=color:#f92672>(</span>res<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// System.out.println(Arrays.toString(ans));
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// stupid weird -0.000 reduction
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> n<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>Math<span style=color:#f92672>.</span><span style=color:#a6e22e>abs</span><span style=color:#f92672>(</span>ans<span style=color:#f92672>[</span>i<span style=color:#f92672>])</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1e-4</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                    ans<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> n<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>printf</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;%s=%.3f&#34;</span><span style=color:#f92672>,</span> vars<span style=color:#f92672>[</span>i<span style=color:#f92672>],</span> ans<span style=color:#f92672>[</span>i<span style=color:#f92672>]);</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>i <span style=color:#f92672>!=</span> n <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>print</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;,&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        sc<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Matrix</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> size<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>double</span><span style=color:#f92672>[][]</span> mat<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Matrix</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> size<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>size</span> <span style=color:#f92672>=</span> size<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        mat <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[</span>size<span style=color:#f92672>][</span>size<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Matrix</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span><span style=color:#f92672>[][]</span> mat<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>mat</span> <span style=color:#f92672>=</span> mat<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>size</span> <span style=color:#f92672>=</span> mat<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Matrix <span style=color:#a6e22e>transpose</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        Matrix ret <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Matrix<span style=color:#f92672>(</span>size<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> size<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> j <span style=color:#f92672>&lt;</span> size<span style=color:#f92672>;</span> j<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                ret<span style=color:#f92672>.</span><span style=color:#a6e22e>mat</span><span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> mat<span style=color:#f92672>[</span>j<span style=color:#f92672>][</span>i<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ret<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>_subdet</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> j<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// only for 3x3
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// find determinant of overall matrix without row i and column j
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>double</span><span style=color:#f92672>[][]</span> submat <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[</span><span style=color:#ae81ff>2</span><span style=color:#f92672>][</span><span style=color:#ae81ff>2</span><span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> k <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> a <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> a <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>;</span> a<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>a <span style=color:#f92672>==</span> i<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>continue</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> l <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> b <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> b <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>;</span> b<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>b <span style=color:#f92672>==</span> j<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>continue</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                submat<span style=color:#f92672>[</span>k<span style=color:#f92672>][</span>l<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> mat<span style=color:#f92672>[</span>a<span style=color:#f92672>][</span>b<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>                l<span style=color:#f92672>++;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            k<span style=color:#f92672>++;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> Matrix<span style=color:#f92672>(</span>submat<span style=color:#f92672>).</span><span style=color:#a6e22e>det</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>det</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// size only 2 or 3
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>size <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> mat<span style=color:#f92672>[</span><span style=color:#ae81ff>0</span><span style=color:#f92672>][</span><span style=color:#ae81ff>0</span><span style=color:#f92672>]</span> <span style=color:#f92672>*</span> mat<span style=color:#f92672>[</span><span style=color:#ae81ff>1</span><span style=color:#f92672>][</span><span style=color:#ae81ff>1</span><span style=color:#f92672>]</span> <span style=color:#f92672>-</span> mat<span style=color:#f92672>[</span><span style=color:#ae81ff>0</span><span style=color:#f92672>][</span><span style=color:#ae81ff>1</span><span style=color:#f92672>]</span> <span style=color:#f92672>*</span> mat<span style=color:#f92672>[</span><span style=color:#ae81ff>1</span><span style=color:#f92672>][</span><span style=color:#ae81ff>0</span><span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>size <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span> ret <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                ret <span style=color:#f92672>+=</span> mat<span style=color:#f92672>[</span><span style=color:#ae81ff>0</span><span style=color:#f92672>][</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>*</span> _subdet<span style=color:#f92672>(</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> i<span style=color:#f92672>)</span> <span style=color:#f92672>*</span> <span style=color:#f92672>(</span>i <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>?</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>:</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>);</span> <span style=color:#75715e>// aA - bB + cC
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> ret<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Matrix <span style=color:#a6e22e>inverse</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>size <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span> det <span style=color:#f92672>=</span> det<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span><span style=color:#f92672>[][]</span> inv <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[][]</span> <span style=color:#f92672>{</span> <span style=color:#f92672>{</span> mat<span style=color:#f92672>[</span><span style=color:#ae81ff>1</span><span style=color:#f92672>][</span><span style=color:#ae81ff>1</span><span style=color:#f92672>],</span> <span style=color:#f92672>-</span>mat<span style=color:#f92672>[</span><span style=color:#ae81ff>0</span><span style=color:#f92672>][</span><span style=color:#ae81ff>1</span><span style=color:#f92672>]</span> <span style=color:#f92672>},</span> <span style=color:#f92672>{</span> <span style=color:#f92672>-</span>mat<span style=color:#f92672>[</span><span style=color:#ae81ff>1</span><span style=color:#f92672>][</span><span style=color:#ae81ff>0</span><span style=color:#f92672>],</span> mat<span style=color:#f92672>[</span><span style=color:#ae81ff>0</span><span style=color:#f92672>][</span><span style=color:#ae81ff>0</span><span style=color:#f92672>]</span> <span style=color:#f92672>}</span> <span style=color:#f92672>};</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> j <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>;</span> j<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    inv<span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>/=</span> det<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> Matrix<span style=color:#f92672>(</span>inv<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>size <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span> det <span style=color:#f92672>=</span> det<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>double</span><span style=color:#f92672>[][]</span> inv <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[</span><span style=color:#ae81ff>3</span><span style=color:#f92672>][</span><span style=color:#ae81ff>3</span><span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> j <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>;</span> j<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    inv<span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> _subdet<span style=color:#f92672>(</span>i<span style=color:#f92672>,</span> j<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>i <span style=color:#f92672>+</span> j<span style=color:#f92672>)</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                        inv<span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>*=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            Matrix ret <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Matrix<span style=color:#f92672>(</span>inv<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            ret <span style=color:#f92672>=</span> ret<span style=color:#f92672>.</span><span style=color:#a6e22e>transpose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> j <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>;</span> j<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    ret<span style=color:#f92672>.</span><span style=color:#a6e22e>mat</span><span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>/=</span> det<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> ret<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span> <span style=color:#75715e>// bad size
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span> <span style=color:#a6e22e>multiply_vector</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span> vec<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>assert</span> vec<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span> <span style=color:#f92672>==</span> size<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span> ret <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[</span>size<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> size<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> j <span style=color:#f92672>&lt;</span> size<span style=color:#f92672>;</span> j<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                ret<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>+=</span> mat<span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>*</span> vec<span style=color:#f92672>[</span>j<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ret<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String ret <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> size<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> j <span style=color:#f92672>&lt;</span> size<span style=color:#f92672>;</span> j<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                ret <span style=color:#f92672>+=</span> mat<span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            ret <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;\n&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ret<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>I do have this small tidbit before printing</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> n<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>Math<span style=color:#f92672>.</span><span style=color:#a6e22e>abs</span><span style=color:#f92672>(</span>ans<span style=color:#f92672>[</span>i<span style=color:#f92672>])</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1e-4</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                    ans<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span></code></pre></div><p>This is because sometimes the float multiplication isn&rsquo;t entirely accurate and might cause the <code>printf</code> to output something like <code>-0.000</code>, which this code fixes.</p><h2 id=conclusion>Conclusion</h2><p>There are also a few other ways to solve this problem, including Gaussian Elimination, but I chose to do it this way because it&rsquo;s very generalizable and you don&rsquo;t have to worry
about weird row operations. I hope this writeup helped you understand this method and hopefully you&rsquo;ll be able to use it in the future.</p><p>If you have any questions or suggestions, feel free to DM me on discord. Thanks for reading!</p></div></div></main></div><script>function handle_open(e){let t=e.target;e.target.tagName==="SUMMARY"&&(t=e.target.querySelector(".code-summary-inner")),t.classList.toggle("open"),t.classList.contains("open")?t.textContent="Click to collapse "+t.textContent.split(" ").slice(3).join(" "):t.textContent="Click to expand "+t.textContent.split(" ").slice(3).join(" ")}let code_divs=document.querySelectorAll("div.highlight"),to_remove=[];for(let e of code_divs){let t="",n=e.previousElementSibling;n.tagName=="P"&&(n=n.textContent,n.startsWith("filename")&&(t=n.split("=")[1].trim(),to_remove.push(e.previousElementSibling)));let s=e.querySelector("pre code"),o=s.textContent.split(`
`).length;if(t!==""||o>10){let n=document.createElement("details"),o=document.createElement("summary"),i=document.createElement("span");i.textContent="Click to expand",t!==""&&(i.textContent+=" "+t,n.setAttribute("id",t)),i.classList.add("code-summary-inner"),o.appendChild(i),o.addEventListener("click",handle_open),o.classList.add("code-summary"),s.classList.add("code-inner"),e.parentNode.insertBefore(n,e),n.appendChild(o),n.appendChild(e),n.classList.add("code-wrapper")}}for(let e of to_remove)e.remove();let anchors=document.querySelectorAll(".postWrapper a");for(let e of anchors)e.host!==window.location.host&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))</script><footer class=footer>© 2023 flocto, Built with
<a href=https://gohugo.io class=footerLink>Hugo</a> and (an edited)
<a href=https://github.com/LordMathis/hugo-theme-nightfall class=footerLink>Nightfall</a> theme</footer><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></div></body></html>